---
description: 지식 학습 및 저장 프로토콜
---

# 지식 학습 워크플로우 (/learn)

## 🎯 목적

대화 중 발견한 새로운 지식을 영구적으로 저장하여 미래 대화에서 활용하는 프로세스입니다.

---

## 📚 학습 대상

### 1. 비즈니스 로직

- 도메인 특화 규칙
- 계산 공식
- 워크플로우 정의

**예시**: "사용자 등급은 총 구매액이 100만원 이상이면 VIP"

### 2. 기술적 결정

- 아키텍처 선택 이유
- 라이브러리 선택 근거
- 성능 최적화 방법

**예시**: "이미지는 Cloudinary에 저장, CDN 사용으로 로딩 속도 개선"

### 3. 사용자 선호도

- 코딩 스타일
- 네이밍 컨벤션
- 선호하는 도구

**예시**: "함수명은 동사+명사 형태 선호 (getUserProfile)"

### 4. 프로젝트 컨텍스트

- 팀 구조
- 배포 프로세스
- 외부 의존성

**예시**: "배포는 매주 금요일, Vercel 자동 배포"

---

## 🔄 학습 단계

### Step 1: 컨텍스트 캡처 (Context Capture)

```
// turbo
대화에서 핵심 정보 자동 추출:

1. 사용자 메시지 파싱
2. 새로운 정보 식별
3. 기존 지식과 중복 체크
4. 중요도 평가 (1-10)
```

**트리거 패턴**:

- "이 프로젝트에서는..."
- "우리는 항상..."
- "XXX는 YYY를 의미해"
- "기억해줘, ..."

---

### Step 2: 지식 구조화 (Knowledge Structuring)

```
캡처한 정보를 구조화된 형식으로 변환:

카테고리 분류 →
  ├─ 비즈니스 로직 → DOMAIN_KNOWLEDGE.md
  ├─ 기술 결정 → DECISION_LOG.md
  ├─ 아키텍처 → CODEBASE_MAP.md
  └─ 기타 → 적절한 파일
```

**형식**:

```markdown
### [주제]
- **정의**: [명확한 정의]
- **이유**: [왜 이렇게 하는가]
- **예시**: [구체적 예시]
- **관련**: [연관 개념]
- **날짜**: [학습 일자]
```

---

### Step 3: 메모리 저장 (Memory Storage)

```
적절한 메모리 파일에 저장:

1. DOMAIN_KNOWLEDGE.md
   - 비즈니스 용어
   - 도메인 규칙
   - 사용자 페르소나

2. DECISION_LOG.md (ADR)
   - 아키텍처 결정
   - 기술 선택
   - 트레이드오프

3. CODEBASE_MAP.md
   - 모듈 구조
   - 의존성 그래프
   - 주요 컴포넌트

4. TECH_DEBT.md
   - 알려진 버그
   - 임시 해결책
   - 개선 계획
   
5. SUCCESS_PATTERNS.md
   - 효과적인 패턴
   - 재사용 가능한 솔루션
   - 베스트 프랙티스
```

---

### Step 4: 상호 참조 (Cross-Reference)

```
기존 지식과 연결:

1. 관련 개념 링크
2. 모순 체크
3. 중복 통합
4. 인덱스 업데이트
```

**링크 형식**:

```markdown
관련 항목: [Rule 12](../rules/DOCTRINE.md#rule-12)
참조: [API 아키텍처](./DECISION_LOG.md#adr-005)
```

---

### Step 5: 검색 가능성 검증 (Retrieval Test)

```
저장된 지식이 검색 가능한지 테스트:

1. 키워드로 검색
2. 관련 질문 시뮬레이션
3. 답변 생성 가능 여부 확인
```

**테스트 질문 예시**:

- "이 프로젝트의 결제 시스템은 어떻게 동작하나요?"
- "왜 PostgreSQL을 선택했나요?"
- "VIP 사용자 기준은 무엇인가요?"

---

## 💡 실전 예시

### 예시 1: 비즈니스 규칙 학습

**대화**:

```
사용자: "포인트는 구매액의 3%를 적립하고, VIP는 5%를 적립해줘"
```

**학습 프로세스**:

1. **캡처**: 포인트 적립 규칙 발견
2. **구조화**:

   ```markdown
   ### 포인트 적립 규칙
   - **일반 사용자**: 구매액의 3%
   - **VIP 사용자**: 구매액의 5%
   - **적용 시점**: 결제 완료 시
   ```

3. **저장**: `DOMAIN_KNOWLEDGE.md`에 추가
4. **검증**: "포인트 적립률은?" → "일반 3%, VIP 5%"

---

### 예시 2: 기술 결정 학습

**대화**:

```
사용자: "Redis는 Upstash로 사용해. 서버리스라 관리 편해"
```

**학습 프로세스**:

1. **캡처**: Redis 선택 및 이유
2. **구조화** (ADR):

   ```markdown
   ## ADR-012: Redis 캐싱 (Upstash)
   
   **날짜**: 2026-02-08
   **상태**: 승인됨
   
   **컨텍스트**:
   - 캐싱 레이어 필요
   - 서버리스 환경
   
   **결정**: Upstash Redis 사용
   
   **이유**:
   - 서버리스 친화적
   - 관리 부담 없음
   - Vercel과 통합 용이
   
   **대안**:
   - AWS ElastiCache: 관리 복잡
   - 자체 호스팅: 운영 부담
   ```

3. **저장**: `DECISION_LOG.md`에 추가

---

### 예시 3: 코드 패턴 학습

**대화**:

```
사용자: "API 에러는 항상 { error: string, code: number } 형식으로 반환해줘"
```

**학습 프로세스**:

1. **캡처**: API 에러 형식
2. **구조화**:

   ```markdown
   ### API 에러 응답 형식
   
   **표준 형식**:
   ```typescript
   interface APIError {
     error: string;  // 사용자 친화적 메시지
     code: number;   // HTTP 상태 코드
   }
   ```

   **예시**:

   ```json
   {
     "error": "사용자를 찾을 수 없습니다",
     "code": 404
   }
   ```

   ```
3. **저장**: `SUCCESS_PATTERNS.md`에 추가

---

## 🧠 메모리 파일 구조

### DOMAIN_KNOWLEDGE.md

```markdown
# 프로젝트 비즈니스 로직

## 용어집
### VIP 사용자
- **정의**: 총 구매액 100만원 이상
- **혜택**: 5% 포인트 적립, 무료 배송

## 비즈니스 규칙
### 포인트 적립
- 일반: 3%
- VIP: 5%
```

### DECISION_LOG.md (ADR)

```markdown
# 아키텍처 의사결정 기록

## ADR-001: Next.js App Router 선택
...

## ADR-012: Upstash Redis 사용
...
```

### SUCCESS_PATTERNS.md

```markdown
# 성공 패턴 라이브러리

## API 설계
### 에러 응답 형식
...

## 상태 관리
### Zustand 스토어 구조
...
```

---

## 🔍 검색 & 활용

### 학습한 지식 검색

```
1. 파일 내 키워드 검색
2. 관련 섹션 읽기
3. 답변에 반영
```

### 자동 활용

```
질문: "포인트 적립률은?"
→ DOMAIN_KNOWLEDGE.md 검색
→ "일반 3%, VIP 5%입니다"
```

---

## ⚙️ 자동화 설정

### 자동 학습 활성화

```json
{
  "auto_learn": {
    "enabled": true,
    "categories": [
      "business_logic",
      "tech_decisions",
      "patterns"
    ],
    "min_importance": 5
  }
}
```

### 학습 트리거

- "기억해줘"
- "이 프로젝트에서는"
- "항상 이렇게"
- 사용자 명시적 요청

---

## 📊 학습 통계

### 누적 지식

- 비즈니스 규칙: 0개
- 기술 결정: 0개
- 성공 패턴: 0개
- 총 학습 항목: 0개

**업데이트**: 2026-02-08

---

## 🏁 완료 조건

- [ ] 컨텍스트 캡처
- [ ] 지식 구조화
- [ ] 메모리 파일 저장
- [ ] 상호 참조 연결
- [ ] 검색 가능성 검증
- [ ] EVOLUTION_LOG 업데이트
